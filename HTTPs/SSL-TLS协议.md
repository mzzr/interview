## SSL-TLS

### SSL/TLS协议的基本过程
1. 客户端向服务器端索要并验证公钥
2. 双方协商生成“对话密钥”
3. 双方采用对话密钥进行加密通信
前两步成为**握手阶段**

TLS协议采用主从式架构模型，用于在两个应用程序间透过网络创建起安全的连线，防止在交换数据时受到窃听及篡改。

TLS协议的优势是与高层的应用层协议（如HTTP "超文本传输协议")、FTP "文件传输协议")、Telnet"Telnet")等）无耦合。应用层协议能透明地运行在TLS协议之上，由TLS协议进行创建加密通道需要的协商和认证。应用层协议传送的数据在通过TLS协议时都会被加密，从而保证通信的私密性。

TLS协议是可选的，必须配置客户端和服务器才能使用。主要有两种方式实现这一目标：一个是使用统一的TLS协议通信端口 "通信端口")（例如：用于HTTPS的端口443）；另一个是客户端请求服务器连接到TLS时使用特定的协议机制（例如：邮件、新闻协议和STARTTLS）。一旦客户端和服务器都同意使用TLS协议，他们通过使用一个握手过程协商出一个有状态的连接以传输数据。通过握手，客户端和服务器协商各种参数用于创建安全连接：

-   当客户端连接到支持TLS协议的服务器要求创建安全连接并列出了受支持的密码组合（加密密码算法和加密哈希函数），握手开始。
-   服务器从该列表中决定加密和散列函数，并通知客户端。
-   服务器发回其数字证书，此证书通常包含服务器的名称、受信任的证书颁发机构（CA）和服务器的公钥。
-   客户端确认其颁发的证书的有效性。
-   为了生成会话密钥用于安全连接，客户端使用服务器的公钥加密随机生成的密钥，并将其发送到服务器，只有服务器才能使用自己的私钥解密。
-   利用随机数，双方生成用于加密和解密的对称密钥。这就是TLS协议的握手，握手完毕后的连接是安全的，直到连接（被）关闭。如果上述任何一个步骤失败，TLS握手过程就会失败，并且断开所有的连接。

## SSL流程C/S
- client-hello
随机数，要证书，商定加密协议
- server-hello
给证书，确定加密协议，给随机数
- client-verify
认证证书，通过非对称加密将随机数用server的公钥加密
- server-finish
server用自己的私钥解密，得到随机数，通过三次随机数来生成加密密钥，进行对称加密

## 对称加密和非对称加密

对称加密：加密和解密时使用相同的密钥，或是使用两个简单地相互推算的密钥。

非对称加密：一种密码学算法加密，需要一对密钥，一个是私人密钥，一个是公开密钥。这两个密钥是数学相关，用某用户密钥加密后所得的信息，只有用该用户的解密密钥才能解密。如果知道一个，并不能计算出另外一个，**单向加密**